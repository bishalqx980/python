import requests

def send_req(bot_token, method, data):
    try:
        req = requests.get(f"https://api.telegram.org/bot{bot_token}/{method}", data)
        return req
    except Exception as e:
        print(e)

class Exploit:
    def get_update(bot_token):
        req = requests.get(f"https://api.telegram.org/bot{bot_token}/getUpdates")
        return req.text


    def send_message(bot_token, chat_id, text):
        data = {
            "chat_id": chat_id,
            "text": text
        }

        req = send_req(bot_token, "sendMessage", data)
        if req.status_code != 200:
            print(req.text)
            return
        return req.text


    def set_chat_title(bot_token, chat_id, title):
        data = {
            "chat_id": chat_id,
            "title": title
        }

        req = send_req(bot_token, "setChatTitle", data)
        if req.status_code != 200:
            print(req.text)
            return
        return req.text


    def set_chat_desc(bot_token, chat_id, description):
        data = {
            "chat_id": chat_id,
            "description": description
        }

        req = send_req(bot_token, "setChatDescription", data)
        if req.status_code != 200:
            print(req.text)
            return
        return req.text


    def unpinall_msg(bot_token, chat_id):
        data = {
            "chat_id": chat_id
        }

        req = send_req(bot_token, "unpinAllChatMessages", data)
        if req.status_code != 200:
            print(req.text)
            return
        return req.text


    def del_chat_photo(bot_token, chat_id):
        data = {
            "chat_id": chat_id
        }

        req = send_req(bot_token, "deleteChatPhoto", data)
        if req.status_code != 200:
            print(req.text)
            return
        return req.text


    def get_chat_admins(bot_token, chat_id):
        data = {
            "chat_id": chat_id
        }

        req = send_req(bot_token, "getChatAdministrators", data)
        if req.status_code != 200:
            print(req.text)
            return
        return req.text


    def set_bot_name(bot_token, name):
        data = {
            "name": name
        }

        req = send_req(bot_token, "setMyName", data)
        if req.status_code != 200:
            print(req.text)
            return
        return req.text
